{namespace vh=In2code\Powermail\ViewHelpers}
<f:layout name="Default" />

<f:section name="main">
    <div class="Form__summary" data-powermail-form="{mail.form.uid}">
        <h3 class="Form__summary-heading">{f:translate(key: 'LLL:EXT:tw_forms/Resources/Private/Language/locallang.xlf:form.confirmation')}</h3>

        <f:comment>Render custom summary grouped by pages</f:comment>
        <f:render partial="PowermailAll/Web" arguments="{mail: mail}" />

        <div class="Form__button-wrapper" role="group">
            <f:comment>Back button</f:comment>
            <f:form
                    action="form"
                    section="c{ttContentData.uid}"
                    name="field"
                    enctype="multipart/form-data"
                    class="visible-xs-inline-block visible-sm-inline-block visible-md-inline-block visible-lg-inline-block"
                    addQueryString="{settings.misc.addQueryString}"
                    additionalAttributes="{vh:validation.enableJavascriptValidationAndAjax(form: mail.form)}">
                <f:render section="HiddenFields" arguments="{_all}" />
                <f:form.submit
                        value="{f:translate(key: 'LLL:EXT:tw_forms/Resources/Private/Language/locallang.xlf:form.confirmation_prev')}"
                        additionalAttributes="{data-powermail-form-ajax:'confirmation'}"
                        class="Form__button" />
            </f:form>

            <f:comment>Submit button</f:comment>
            <f:form
                    action="checkCreate"
                    section="c{ttContentData.uid}"
                    name="field"
                    enctype="multipart/form-data"
                    class="visible-xs-inline-block visible-sm-inline-block visible-md-inline-block visible-lg-inline-block"
                    addQueryString="{settings.misc.addQueryString}"
                    additionalAttributes="{vh:validation.enableJavascriptValidationAndAjax(form: mail.form)}">
                <f:render section="HiddenFields" arguments="{_all}" />
                <f:form.submit
                        value="{f:translate(key: 'LLL:EXT:tw_forms/Resources/Private/Language/locallang.xlf:form.confirmation_next')}"
                        additionalAttributes="{data-powermail-form-ajax:'submit'}"
                        class="Form__button" />
            </f:form>
        </div>
    </div>
</f:section>

<f:section name="HiddenFields">
    <f:for each="{mail.answers}" as="answer">
        <f:if condition="{vh:condition.isArray(val:answer.value)}">
            <f:then>
                <f:for each="{answer.value}" as="subvalue" iteration="i">
                    <f:form.hidden property="{answer.field.marker}.{i.index}" value="{subvalue}" respectSubmittedDataValue="false"  />
                </f:for>
            </f:then>
            <f:else>
                <f:form.hidden property="{answer.field.marker}" value="{answer.value}" respectSubmittedDataValue="false"  />
            </f:else>
        </f:if>
    </f:for>

    <f:form.hidden name="mail[form]" value="{mail.form.uid}" class="powermail_form_uid" />
</f:section>
