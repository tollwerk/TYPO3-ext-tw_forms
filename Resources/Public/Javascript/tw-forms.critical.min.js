var u=Math.pow;(function(o,a,l,s){window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=function(r,t){for(let i=0;i<this.length;++i)r.call(t||window,this[i],i,this)}),a.matches||(a.matches=a.matchesSelector||a.mozMatchesSelector||a.msMatchesSelector||a.oMatchesSelector||a.webkitMatchesSelector||(e=>{const r=(this.document||this.ownerDocument).querySelectorAll(e);let t=r.length-1;for(;t>=0&&r.item(t)!==this;)t-=1;return t>-1})),a.closest||(a.closest=function(r){let t=this;do{if(t.matches(r))return t;t=t.parentElement||t.parentNode}while(t!==null&&t.nodeType===1);return null}),l.format||(l.format=function(...r){return this.replace(/{(\d+)}/g,(t,i)=>typeof r[i]!="undefined"?r[i]:t)}),"classList"in s||Object.defineProperty(s,"classList",{get(){return{contains:e=>this.className.baseVal.split(" ").indexOf(e)!==-1,add:e=>this.setAttribute("class",`${this.getAttribute("class")} ${e}`),remove:e=>{const r=this.getAttribute("class").replace(new RegExp(`(\\s|^)${e}(\\s|$)`,"g"),"$2");this.classList.contains(e)&&this.setAttribute("class",r)}}}})})(window,Element.prototype,String.prototype,SVGElement.prototype);const tw_forms=window.tw_forms||{has:{}};window.tw_forms=tw_forms,(function(o,a){if(typeof exports!="undefined"&&exports.Observer||o.tw_forms.Observer)return;function l(){this.observed=[["[data-mutate-recursive]",this.process.bind(this)]];const s=this.checkNode.bind(this);new MutationObserver(r=>r.forEach(t=>Array.prototype.slice.call(t.addedNodes).filter(i=>i.nodeType===1).forEach(s))).observe(a.documentElement,{characterData:!0,attributes:!1,childList:!0,subtree:!0})}l.prototype.register=function(s,e){this.observed.push([s,e])},l.prototype.checkNode=function(s){this.observed.filter(e=>s.matches&&s.matches(e[0])).forEach(e=>e[1](s))},l.prototype.process=function(s){s.nodeType===Node.ELEMENT_NODE&&this.observed.forEach(e=>s.querySelectorAll(e[0]).forEach(r=>e[1](r)))},typeof exports!="undefined"?exports.Observer=new l:o.tw_forms.Observer=new l})(typeof global!="undefined"?global:window,document),document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll("form").forEach(o=>{const a=o.querySelectorAll(".powermail_fieldset");a.length>1&&o.classList.contains("powermail_morestep")?o._stepPristine=Array(a.length).fill(!0):o.dataset.dirty="0"})}),document.addEventListener("submit",function(n){const o=n.target.closest("form");if(o){if(Array.isArray(o._stepPristine)){const a=Array.from(o.querySelectorAll(".powermail_fieldset"));let l=0;for(let t=0;t<a.length;t++)if(a[t].style.display!=="none"){l=t;break}o._stepPristine[l]=!1;const s=a[l];s&&s.querySelectorAll("input, select, textarea").forEach(t=>{t.enhancer&&typeof t.enhancer.setPristine=="function"&&t.enhancer.setPristine(!1)});let e=!0;return Array.from(o.elements).forEach(t=>{if(window.isFieldVisible&&window.isFieldVisible(t)&&t.enhancer){const i=t.enhancer.validate(!0,{force:!0});i&&Object.keys(i).length>0&&(e=!1)}}),e?void 0:(o.enhancer&&o.enhancer.errorNavigation&&(o.enhancer.errorNavigation.removeAttribute("hidden"),o.enhancer.errorNavigation.classList.add("Form__error-navigation--visible"),o.enhancer.errorNavigation.focus()),n.preventDefault(),n.stopImmediatePropagation(),!1)}o.dataset.dirty="1"}},!0);const PowermailValidators={length:n=>{if(!n.hasAttribute("data-powermail-length")||n.value==="")return!1;const a=n.getAttribute("data-powermail-length").replace("[","").replace("]","").split(","),l=a[0].trim(),s=a[1].trim();return parseInt(n.value.length)<parseInt(l)||parseInt(n.value.length)>parseInt(s)},equalto:n=>{if(!n.hasAttribute("data-powermail-equalto"))return!1;const o=n.getAttribute("data-powermail-equalto"),a=n.closest("form").querySelector(o);return a!==null?a.value!==n.value:!1},powermailfilesize:n=>{if(n.type!=="file"||!n.hasAttribute("data-powermail-powermailfilesize")||n.value==="")return!1;const o=n.files,a=n.getAttribute("data-powermail-powermailfilesize").split(","),l=parseInt(a[0]);for(let s=0;s<o.length;s++)if(o[s].size>l)return!0;return!1},powermailfileextensions:n=>{if(n.type!=="file"||!n.hasAttribute("accept")||n.value==="")return!1;const o=n.value.split(".").pop().toLowerCase();return n.getAttribute("accept").split(",").map(l=>l.trim().replace(".","").toLowerCase()).includes(o)===!1}};(function(o,a){let l=a.documentElement.scrollIntoView?"scrollIntoView":null;a.documentElement.scrollIntoViewIfNeeded&&(l="scrollIntoViewIfNeeded");function s(e){this.element=e,this.element.enhancer=this,this.wrapper=this.element.closest(".FormField"),this.groupPrimaryEnhancer=null,this.groupEnhancers=[],this.lastConstraints=0,this.errorMessages={},this.lastErrorString="",this.lastPristine=null,this.pristine=!1,this.recursiveErrorMessages=null,this.isGroup=e.classList.contains("FormField__group-element"),this.isGroup&&this.initGroupContext(),this.errorMessageBag=e.hasAttribute("aria-errormessage")?document.getElementById(e.getAttribute("aria-errormessage")):null,this.errorMessageBag&&(this.setupErrorMessages(),this.setupInitialConstraints());const r=e.type==="radio"||e.type==="checkbox"?"change":"input";e.addEventListener(r,t=>{const i=t.target.form;if(Array.isArray(i._stepPristine)){const c=t.target.closest(".powermail_fieldset"),h=[...i.querySelectorAll(".powermail_fieldset")].indexOf(c);if(i._stepPristine[h])return}else if(i.dataset.dirty!=="1")return;this.isGroup&&this.groupPrimaryEnhancer?this.groupPrimaryEnhancer.validate(!0):this.validate(!0)})}s.prototype.constraints=["badInput","patternMismatch","rangeOverflow","rangeUnderflow","stepMismatch","tooLong","tooShort","typeMismatch","valueMissing","customError"],s.prototype.initGroupContext=function(){const e=this.element.name,t=Array.from(this.element.form.elements).filter(c=>c.name===e&&c.classList.contains("FormField__group-element")),i=t[0];this.element===i?(this.groupEnhancers=[this],t.forEach(c=>{c!==this.element&&(c.enhancer?(this.groupEnhancers.push(c.enhancer),c.enhancer.groupPrimaryEnhancer=this):Object.defineProperty(c,"_primaryEnhancer",{value:this,writable:!0}))})):this.element._primaryEnhancer&&(this.groupPrimaryEnhancer=this.element._primaryEnhancer,this.groupPrimaryEnhancer.groupEnhancers.push(this))},s.prototype.setupErrorMessages=function(){this.constraints.forEach(e=>{const r="data-errormsg"+e.charAt(0).toUpperCase()+e.slice(1);this.element.dataset[r]&&(this.errorMessages[e]=this.element.dataset[r])})},s.prototype.setupInitialConstraints=function(){this.errorMessageBag.querySelectorAll("[data-constraint]").forEach(e=>{const r=e.dataset.constraint,t=this.constraints.indexOf(r);t>=0&&(this.lastConstraints+=u(2,t))})},s.prototype.setPristine=function(e){this.pristine=e,e&&this.updateErrorMessageBag(0,{})},s.prototype.validate=function(e=!1,r={}){if(this.pristine&&!(r&&r.force))return{};if(this.recursiveErrorMessages)return this.recursiveErrorMessages;const t={};let i=0,c;return this.isGroup&&!this.groupPrimaryEnhancer?(c=this.validateGroup(),c.valueMissing&&(t.valueMissing=this.element.getAttribute("data-powermail-required-message")||this.element.getAttribute("data-errormsgvaluemissing")||this.errorMessages.valueMissing||this.element.validationMessage,i+=u(2,this.constraints.indexOf("valueMissing")))):(c=this.element.validity,c.valueMissing?(t.valueMissing=this.element.getAttribute("data-powermail-required-message")||this.element.getAttribute("data-errormsgvaluemissing")||this.errorMessages.valueMissing||this.element.validationMessage,i+=u(2,this.constraints.indexOf("valueMissing"))):this.element.checkValidity()||this.constraints.forEach(h=>{if(h!=="valueMissing"&&c[h]){const p="data-powermail-"+h.toLowerCase()+"-message";t[h]=this.element.getAttribute(p)||this.element.getAttribute("data-powermail-error-message")||this.element.getAttribute("data-errormsg"+h.charAt(0).toUpperCase()+h.slice(1))||this.errorMessages[h]||this.element.validationMessage,i+=u(2,this.constraints.indexOf(h))}})),this.isGroup||Object.keys(PowermailValidators).forEach(h=>{if(PowermailValidators[h](this.element)){const p="data-powermail-"+h.toLowerCase()+"-message";t.customError=this.element.getAttribute(p)||this.element.getAttribute("data-powermail-error-message")||this.errorMessages.customError,i+=u(2,this.constraints.indexOf("customError"))}}),this.recursiveErrorMessages=t,this.updateErrorMessageBag(i,t),this.recursiveErrorMessages=null,t},s.prototype.validateGroup=function(){let e=this.element.checked;for(let r=0;r<this.groupEnhancers.length;++r)if(this.groupEnhancers[r].element.checked){e=!0;break}return this.overrideValidityState({valueMissing:!e})},s.prototype.overrideValidityState=function(e){const r={valid:!0};return this.constraints.forEach(t=>{var i;r[t]=(i=e[t])!=null?i:this.element.validity[t],r[t]&&(r.valid=!1)}),r},s.prototype.updateErrorMessageBag=function(e,r){var c;if(!this.errorMessageBag)return;const t=Object.keys(r).length>0,i=JSON.stringify(r);if(e!==this.lastConstraints||i!==this.lastErrorString||this.pristine!==this.lastPristine){this.lastConstraints=e,this.lastErrorString=i,this.lastPristine=this.pristine,t?(this.errorMessageBag.removeAttribute("hidden"),this.element.setAttribute("aria-invalid","true"),this.wrapper&&this.wrapper.classList.add("FormField--has-error")):(this.errorMessageBag.setAttribute("hidden","hidden"),this.element.setAttribute("aria-invalid","false"),this.wrapper&&this.wrapper.classList.remove("FormField--has-error")),this.errorMessageBag.querySelectorAll("[data-constraint]").forEach(h=>h.remove());for(const[h,p]of Object.entries(r)){const f=document.createElement("span");f.setAttribute("data-constraint",h),f.textContent=p,this.errorMessageBag.appendChild(f)}typeof((c=this.element.form.enhancer)==null?void 0:c.update)=="function"&&queueMicrotask(()=>this.element.form.enhancer.update())}},s.prototype.focusWrapper=function(){l&&this.wrapper&&!this.pristine&&this.wrapper[l]({block:"center",inline:"start",behavior:"smooth"})},s.prototype.focus=function(){this.element.focus(),this.focusWrapper()},tw_forms.Observer.register(".FormField__input, .FormField__textarea",e=>new s(e))})(typeof global!="undefined"?global:window,document);
