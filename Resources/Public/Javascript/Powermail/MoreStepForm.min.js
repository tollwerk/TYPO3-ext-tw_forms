(()=>{var g=class{static getLargestFileSize(r){let o=0;for(let c=0;c<r.files.length;c++){let u=r.files[c];u.size>o&&(o=u.size)}return o}static isFileExtensionInList(r,o){return o.indexOf("."+r)!==-1}static getExtensionFromFileName(r){return r.split(".").pop().toLowerCase()}static getUriWithoutGetParam(r){return r.split("?")[0]}static getRandomString(r){let o="",c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let u=0;u<r;u++)o+=c.charAt(Math.floor(Math.random()*c.length));return o}static redirectToUri(r){r.indexOf("http")!==-1?window.location=r:window.location.pathname=r}static hideElement(r){r!==null&&(r.style.display="none")}static showElement(r){r!==null&&(r.style.display="block")}static isElementVisible(r){return r.offsetParent!==null}};function S(){"use strict";let d="powermail_morestep",r="powermail_fieldset",o="is-active",c="is-valid",u="is-disabled",f=new WeakMap,A=this;this.initialize=function(){document.querySelectorAll("form."+d).forEach(n=>{let t=n.querySelectorAll("."+r);n._stepPristine=Array(t.length).fill(!0)}),P(),_()},this.showFieldset=function(n,t){if(console.log("Zeige Step:",n),t.classList.contains(d)){E(t);let s=h(t);g.showElement(s[n]),F(t,n,f.get(t)||-1),t.enhancer&&t.enhancer.errorNavigation&&(t.enhancer.errorNavigation.setAttribute("hidden","hidden"),t.enhancer.errorNavigation.classList.remove("Form__error-navigation--visible"));let i=n;Array.isArray(t._stepPristine)&&t._stepPristine[i]&&h(t)[i].querySelectorAll("input, select, textarea").forEach(l=>{l.enhancer&&typeof l.enhancer.setPristine=="function"&&l.enhancer.setPristine(!0)})}};let _=function(){let n=document.querySelectorAll("form."+d);for(let t=0;t<n.length;t++)x(n[t])},x=function(n){f.set(n,-1),A.showFieldset(0,n)},y=function(n,{showErrors:t=!0}={}){if(typeof window.isFieldVisible!="function")return!0;let s=Array.from(n.elements).filter(e=>window.isFieldVisible(e)&&e.enhancer),i=!0;return s.forEach(e=>{let l=e.enhancer.validate(!0,{force:t});Object.keys(l).length>0&&(i=!1)}),i},P=function(){let n=document.querySelectorAll(".pull-right");for(let s=0;s<n.length;s++)n[s].addEventListener("click",function(i){i.preventDefault();let e=i.target.closest("form"),l=w(e),a=parseInt(i.target.getAttribute("data-powermail-morestep-show"),10);if(a>l){if(!(Array.isArray(e._stepPristine)&&(e._stepPristine[l]=!1,h(e)[l].querySelectorAll("input, select, textarea").forEach(p=>{var L;(L=p.enhancer)!=null&&L.setPristine&&p.enhancer.setPristine(!1)})),y(e,{showErrors:!0})))return Array.isArray(e._stepPristine)&&(e._stepPristine[l]=!1,h(e)[l].querySelectorAll("input, select, textarea").forEach(p=>{p.enhancer&&typeof p.enhancer.setPristine=="function"&&p.enhancer.setPristine(!1)})),e.enhancer&&e.enhancer.errorNavigation&&(e.enhancer.errorNavigation.removeAttribute("hidden"),e.enhancer.errorNavigation.classList.add("Form__error-navigation--visible"),e.enhancer.errorNavigation.focus()),!1;let v=Math.max(l,f.get(e)||-1);f.set(e,v),A.showFieldset(a,e),F(e,a,v),e.enhancer&&e.enhancer.errorNavigation&&(e.enhancer.errorNavigation.setAttribute("hidden","hidden"),e.enhancer.errorNavigation.classList.remove("Form__error-navigation--visible"))}});let t=document.querySelectorAll("nav.Progress");for(let s=0;s<t.length;s++){let i=t[s].querySelectorAll(".Progress__button");for(let e=0;e<i.length;e++)i[e].addEventListener("click",function(l){l.preventDefault();let a=l.target.closest("form"),m=Array.from(i).indexOf(l.target),v=f.get(a)||-1,b=w(a);if(m>v)return!1;if(m>b&&m>v)if(Array.isArray(a._stepPristine)&&(a._stepPristine[b]=!1),y(a))f.set(a,b);else return a.enhancer&&a.enhancer.errorNavigation&&(a.enhancer.errorNavigation.removeAttribute("hidden"),a.enhancer.errorNavigation.classList.add("Form__error-navigation--visible"),a.enhancer.errorNavigation.focus()),!1;A.showFieldset(m,a)})}},E=function(n){let t=h(n);for(let s=0;s<t.length;s++)g.hideElement(t[s])},w=function(n){let t=h(n);for(let s=0;s<t.length;s++)if(t[s].style.display!=="none")return s;return 0},h=function(n){return n.querySelectorAll("."+r)},F=function(n,t,s){let i=n.querySelectorAll(".Progress__button, [data-powermail-morestep-current]");s=typeof s=="number"?s:-1;for(let e=0;e<i.length;e++){i[e].classList.remove(o,c,u),i[e].removeAttribute("disabled"),i[e].removeAttribute("aria-current");let l=i[e].dataset.powermailDefaultLabel||i[e].textContent.trim(),a=i[e].dataset.powermailMorestepSuccess||"";e===t?(i[e].classList.add(o),i[e].textContent=l,i[e].setAttribute("aria-current","step")):e<=s?(i[e].classList.add(c),i[e].textContent=a?`${l} ${a}`:l):(e>s+1&&(i[e].classList.add(u),i[e].setAttribute("disabled","disabled")),i[e].textContent=l)}}}document.addEventListener("DOMContentLoaded",function(){document.readyState==="loading"?document.addEventListener("DOMContentLoaded",d):d();function d(){setTimeout(function(){new S().initialize()},10)}});})();
