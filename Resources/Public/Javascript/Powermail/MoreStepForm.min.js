(()=>{var m=class{static getLargestFileSize(i){let o=0;for(let c=0;c<i.files.length;c++){let u=i.files[c];u.size>o&&(o=u.size)}return o}static isFileExtensionInList(i,o){return o.indexOf("."+i)!==-1}static getExtensionFromFileName(i){return i.split(".").pop().toLowerCase()}static getUriWithoutGetParam(i){return i.split("?")[0]}static getRandomString(i){let o="",c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let u=0;u<i;u++)o+=c.charAt(Math.floor(Math.random()*c.length));return o}static redirectToUri(i){i.indexOf("http")!==-1?window.location=i:window.location.pathname=i}static hideElement(i){i!==null&&(i.style.display="none")}static showElement(i){i!==null&&(i.style.display="block")}static isElementVisible(i){return i.offsetParent!==null}};function P(){"use strict";let f="powermail_morestep",i="powermail_fieldset",o="is-active",c="is-valid",u="is-disabled",h=new WeakMap,A=this;this.initialize=function(){document.querySelectorAll("form."+f).forEach(s=>{let t=s.querySelectorAll("."+i);s._stepPristine=Array(t.length).fill(!0)}),_(),F()},this.showFieldset=function(s,t){if(t.classList.contains(f)){E(t);let n=p(t);m.showElement(n[s]),S(t,s,h.get(t)||-1),t.enhancer&&t.enhancer.errorNavigation&&(t.enhancer.errorNavigation.setAttribute("hidden","hidden"),t.enhancer.errorNavigation.classList.remove("Form__error-navigation--visible"));let r=s;Array.isArray(t._stepPristine)&&t._stepPristine[r]&&p(t)[r].querySelectorAll("input, select, textarea").forEach(a=>{a.enhancer&&typeof a.enhancer.setPristine=="function"&&a.enhancer.setPristine(!0)})}};let F=function(){let s=document.querySelectorAll("form."+f);for(let t=0;t<s.length;t++)x(s[t])},x=function(s){h.set(s,-1),A.showFieldset(0,s)},y=function(s,{showErrors:t=!0}={}){if(typeof window.isFieldVisible!="function")return!0;let n=Array.from(s.elements).filter(e=>window.isFieldVisible(e)&&e.enhancer),r=!0;return n.forEach(e=>{let a=!e.enhancer.pristine||t,l=e.enhancer.validate(!0,{force:a});Object.keys(l).length>0&&(r=!1)}),r},_=function(){let s=document.querySelectorAll("[data-powermail-morestep-next]");for(let n=0;n<s.length;n++)s[n].addEventListener("click",function(r){r.preventDefault();let e=r.target.closest("form"),a=w(e),l=parseInt(r.target.getAttribute("data-powermail-morestep-show"),10);if(l>a){if(!(Array.isArray(e._stepPristine)&&(e._stepPristine[a]=!1,p(e)[a].querySelectorAll("input, select, textarea").forEach(g=>{var L;(L=g.enhancer)!=null&&L.setPristine&&g.enhancer.setPristine(!1)})),y(e,{showErrors:!0})))return Array.isArray(e._stepPristine)&&(e._stepPristine[a]=!1,p(e)[a].querySelectorAll("input, select, textarea").forEach(g=>{g.enhancer&&typeof g.enhancer.setPristine=="function"&&g.enhancer.setPristine(!1)})),e.enhancer&&e.enhancer.errorNavigation&&(e.enhancer.errorNavigation.removeAttribute("hidden"),e.enhancer.errorNavigation.classList.add("Form__error-navigation--visible"),e.enhancer.errorNavigation.focus()),!1;let v=Math.max(a,h.get(e)||-1);h.set(e,v),A.showFieldset(l,e),S(e,l,v),e.enhancer&&e.enhancer.errorNavigation&&(e.enhancer.errorNavigation.setAttribute("hidden","hidden"),e.enhancer.errorNavigation.classList.remove("Form__error-navigation--visible"))}});let t=document.querySelectorAll("nav.Progress");for(let n=0;n<t.length;n++){let r=t[n].querySelectorAll(".Progress__button");for(let e=0;e<r.length;e++)r[e].addEventListener("click",function(a){a.preventDefault();let l=a.target.closest("form"),d=Array.from(r).indexOf(a.target),v=h.get(l)||-1,b=w(l);if(d>v)return!1;if(d>b&&d>v)if(Array.isArray(l._stepPristine)&&(l._stepPristine[b]=!1),y(l))h.set(l,b);else return l.enhancer&&l.enhancer.errorNavigation&&(l.enhancer.errorNavigation.removeAttribute("hidden"),l.enhancer.errorNavigation.classList.add("Form__error-navigation--visible"),l.enhancer.errorNavigation.focus()),!1;A.showFieldset(d,l)})}},E=function(s){let t=p(s);for(let n=0;n<t.length;n++)m.hideElement(t[n])},w=function(s){let t=p(s);for(let n=0;n<t.length;n++)if(t[n].style.display!=="none")return n;return 0},p=function(s){return s.querySelectorAll("."+i)},S=function(s,t,n){let r=s.querySelectorAll(".Progress__button, [data-powermail-morestep-current]");n=typeof n=="number"?n:-1;for(let e=0;e<r.length;e++){r[e].classList.remove(o,c,u),r[e].removeAttribute("disabled"),r[e].removeAttribute("aria-current");let a=r[e].dataset.powermailDefaultLabel||r[e].textContent.trim(),l=r[e].dataset.powermailMorestepSuccess||"",d=r[e].closest(".ProgressStep");d.classList.add("ProgressStep--incomplete"),e===t?(r[e].classList.add(o),r[e].textContent=a,r[e].setAttribute("aria-current","step")):e<=n?(r[e].classList.add(c),r[e].textContent=l?`${a} ${l}`:a,d.classList.remove("ProgressStep--incomplete"),d.classList.add("ProgressStep--complete")):(e>n+1&&(r[e].classList.add(u),r[e].setAttribute("disabled","disabled")),r[e].textContent=a)}}}document.addEventListener("DOMContentLoaded",function(){document.readyState==="loading"?document.addEventListener("DOMContentLoaded",f):f();function f(){setTimeout(function(){new P().initialize()},10)}});})();
