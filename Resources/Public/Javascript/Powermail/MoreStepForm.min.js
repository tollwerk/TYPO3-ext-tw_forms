(()=>{var m=class{static getLargestFileSize(i){let c=0;for(let d=0;d<i.files.length;d++){let u=i.files[d];u.size>c&&(c=u.size)}return c}static isFileExtensionInList(i,c){return c.indexOf("."+i)!==-1}static getExtensionFromFileName(i){return i.split(".").pop().toLowerCase()}static getUriWithoutGetParam(i){return i.split("?")[0]}static getRandomString(i){let c="",d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let u=0;u<i;u++)c+=d.charAt(Math.floor(Math.random()*d.length));return c}static redirectToUri(i){i.indexOf("http")!==-1?window.location=i:window.location.pathname=i}static hideElement(i){i!==null&&(i.style.display="none")}static showElement(i){i!==null&&(i.style.display="block")}static isElementVisible(i){return i.offsetParent!==null}};function L(){"use strict";let f="powermail_morestep",i="powermail_fieldset",c="is-active",d="is-valid",u="is-disabled",h=new WeakMap,A=this;this.initialize=function(){document.querySelectorAll("form."+f).forEach(s=>{let r=s.querySelectorAll("."+i);s._stepPristine=Array(r.length).fill(!0)}),_(),x()},this.showFieldset=function(s,r){if(r.classList.contains(f)){E(r);let n=p(r);m.showElement(n[s]),y(r,s,h.get(r)||-1),r.enhancer&&r.enhancer.errorNavigation&&(r.enhancer.errorNavigation.setAttribute("hidden","hidden"),r.enhancer.errorNavigation.classList.remove("Form__error-navigation--visible"));let t=s;Array.isArray(r._stepPristine)&&r._stepPristine[t]&&p(r)[t].querySelectorAll("input, select, textarea").forEach(l=>{l.enhancer&&typeof l.enhancer.setPristine=="function"&&l.enhancer.setPristine(!0)})}};let x=function(){let s=document.querySelectorAll("form."+f);for(let r=0;r<s.length;r++)F(s[r])},F=function(s){h.set(s,-1),A.showFieldset(0,s)},w=function(s,{showErrors:r=!0}={}){if(typeof window.isFieldVisible!="function")return!0;let n=Array.from(s.elements).filter(e=>window.isFieldVisible(e)&&e.enhancer),t=!0;return n.forEach(e=>{let l=!e.enhancer.pristine||r,a=e.enhancer.validate(!0,{force:l});Object.keys(a).length>0&&(t=!1)}),t},_=function(){let s=document.querySelectorAll("[data-powermail-morestep-show]");for(let n=0;n<s.length;n++)s[n].addEventListener("click",function(t){t.preventDefault();let e=t.target.closest("form");if(!e)return!1;let l=S(e),a=parseInt(t.target.getAttribute("data-powermail-morestep-show"),10);if(a<l){A.showFieldset(a,e);let o=h.get(e)||-1;return y(e,a,o),!1}if(a>l){if(!(Array.isArray(e._stepPristine)&&(e._stepPristine[l]=!1,p(e)[l].querySelectorAll("input, select, textarea").forEach(g=>{var P;(P=g.enhancer)!=null&&P.setPristine&&g.enhancer.setPristine(!1)})),w(e,{showErrors:!0})))return Array.isArray(e._stepPristine)&&(e._stepPristine[l]=!1,p(e)[l].querySelectorAll("input, select, textarea").forEach(g=>{g.enhancer&&typeof g.enhancer.setPristine=="function"&&g.enhancer.setPristine(!1)})),e.enhancer&&e.enhancer.errorNavigation&&(e.enhancer.errorNavigation.removeAttribute("hidden"),e.enhancer.errorNavigation.classList.add("Form__error-navigation--visible"),e.enhancer.errorNavigation.focus()),!1;let b=Math.max(l,h.get(e)||-1);h.set(e,b),A.showFieldset(a,e),y(e,a,b),e.enhancer&&e.enhancer.errorNavigation&&(e.enhancer.errorNavigation.setAttribute("hidden","hidden"),e.enhancer.errorNavigation.classList.remove("Form__error-navigation--visible"))}});let r=document.querySelectorAll("nav.Progress");for(let n=0;n<r.length;n++){let t=r[n].querySelectorAll(".Progress__button");for(let e=0;e<t.length;e++)t[e].addEventListener("click",function(l){l.preventDefault();let a=l.target.closest("form"),o=Array.from(t).indexOf(l.target),b=h.get(a)||-1,v=S(a);if(o>b)return!1;if(o>v&&o>b)if(Array.isArray(a._stepPristine)&&(a._stepPristine[v]=!1),w(a))h.set(a,v);else return a.enhancer&&a.enhancer.errorNavigation&&(a.enhancer.errorNavigation.removeAttribute("hidden"),a.enhancer.errorNavigation.classList.add("Form__error-navigation--visible"),a.enhancer.errorNavigation.focus()),!1;A.showFieldset(o,a)})}},E=function(s){let r=p(s);for(let n=0;n<r.length;n++)m.hideElement(r[n])},S=function(s){let r=p(s);for(let n=0;n<r.length;n++)if(r[n].style.display!=="none")return n;return 0},p=function(s){return s.querySelectorAll("."+i)},y=function(s,r,n){let t=s.querySelectorAll(".Progress__button, [data-powermail-morestep-current]");n=typeof n=="number"?n:-1;for(let e=0;e<t.length;e++){t[e].classList.remove(c,d,u,"is-next"),t[e].removeAttribute("disabled"),t[e].removeAttribute("aria-disabled"),t[e].removeAttribute("aria-current");let l=t[e].dataset.powermailDefaultLabel||t[e].textContent.trim(),a=t[e].dataset.powermailMorestepSuccess||"",o=t[e].closest(".ProgressStep");o.classList.remove("ProgressStep--complete","ProgressStep--incomplete","ProgressStep--next"),e===r?(t[e].classList.add(c),t[e].textContent=l,t[e].setAttribute("aria-current","step"),o.classList.add("ProgressStep--incomplete")):e<=n?(t[e].classList.add(d),t[e].textContent=a?`${l} ${a}`:l,o.classList.add("ProgressStep--complete")):e===r+1?(t[e].classList.add("is-next"),t[e].setAttribute("disabled","disabled"),t[e].setAttribute("aria-disabled","true"),t[e].textContent=l,o.classList.add("ProgressStep--next")):(t[e].classList.add(u),t[e].setAttribute("disabled","disabled"),t[e].setAttribute("aria-disabled","true"),t[e].textContent=l,o.classList.add("ProgressStep--incomplete"))}}}document.addEventListener("DOMContentLoaded",function(){document.readyState==="loading"?document.addEventListener("DOMContentLoaded",f):f();function f(){setTimeout(function(){new L().initialize()},10)}});})();
