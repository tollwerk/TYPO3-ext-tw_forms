(()=>{var d=class{static getLargestFileSize(n){let l=0;for(let a=0;a<n.files.length;a++){let o=n.files[a];o.size>l&&(l=o.size)}return l}static isFileExtensionInList(n,l){return l.indexOf("."+n)!==-1}static getExtensionFromFileName(n){return n.split(".").pop().toLowerCase()}static getUriWithoutGetParam(n){return n.split("?")[0]}static getRandomString(n){let l="",a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let o=0;o<n;o++)l+=a.charAt(Math.floor(Math.random()*a.length));return l}static redirectToUri(n){n.indexOf("http")!==-1?window.location=n:window.location.pathname=n}static hideElement(n){n!==null&&(n.style.display="none")}static showElement(n){n!==null&&(n.style.display="block")}static isElementVisible(n){return n.offsetParent!==null}};function y(){"use strict";let c="powermail_morestep",n="powermail_fieldset",l=e=>{if(typeof e._validUntil=="number")return e._validUntil;let t=parseInt(e.dataset.morestepValidUntil||"-1",10);return Number.isNaN(t)?-1:t},a=(e,t)=>{e._validUntil=t,e.dataset.morestepValidUntil=String(t)},o=this;this.initialize=function(){A(),F(),_()},this.showFieldset=function(e,t,s=!0){t.classList.contains(c)&&(V(t),I(t,e),t._activeStep=e,q(t,e),m(t),z(t,e),s&&(t.setAttribute("tabindex","-1"),t.scrollIntoView({behavior:"smooth",block:"start"}),t.focus({preventScroll:!0})))};let A=function(){document.querySelectorAll("form."+c).forEach(e=>{let t=e.querySelectorAll("."+n);e._stepPristine=Array(t.length).fill(!0)})},_=function(){let e=document.querySelectorAll("form."+c);for(let t=0;t<e.length;t++)w(e[t])},w=function(e){a(e,-1),o.showFieldset(0,e,!1)},f=function(e,{showErrors:t=!0}={}){if(typeof window.isFieldVisible!="function")return!0;let s=Array.from(e.elements).filter(r=>window.isFieldVisible(r)&&r.enhancer),i=!0;return s.forEach(r=>{let u=!r.enhancer.pristine||t,S=r.enhancer.validate(!0,{force:u});Object.keys(S).length>0&&(i=!1)}),i},F=function(){E(),N()},E=function(){let e=document.querySelectorAll("[data-powermail-morestep-show]");for(let t=0;t<e.length;t++)e[t].addEventListener("click",function(s){s.preventDefault(),L(s.currentTarget)})},N=function(){let e=document.querySelectorAll("nav.Progress");for(let t=0;t<e.length;t++){let s=e[t].querySelectorAll(".Progress__button");for(let i=0;i<s.length;i++)s[i].addEventListener("click",function(r){r.preventDefault(),C(r.currentTarget,s)})}},L=function(e){let t=e.closest("form");if(!t)return!1;let s=v(t),i=parseInt(e.getAttribute("data-powermail-morestep-show"),10);if(i<s)return o.showFieldset(i,t),!1;i>s&&x(t,s,i)&&o.showFieldset(i,t)},C=function(e,t){let s=e.closest("form"),i=Array.from(t).indexOf(e),r=l(s),u=v(s);if(i>r+1)return!1;if(i>u&&i>r)if(g(s,u),f(s))a(s,u);else return h(s),!1;o.showFieldset(i,s)},x=function(e,t,s){if(g(e,t),!f(e,{showErrors:!0}))return h(e),!1;let r=Math.max(s-1,l(e));return a(e,r),m(e),!0},g=function(e,t){Array.isArray(e._stepPristine)&&(e._stepPristine[t]=!1,p(e)[t].querySelectorAll("input, select, textarea").forEach(i=>{var r;(r=i.enhancer)!=null&&r.setPristine&&i.enhancer.setPristine(!1)}))},V=function(e){let t=p(e);for(let s=0;s<t.length;s++)d.hideElement(t[s])},I=function(e,t){let s=p(e);d.showElement(s[t])},q=function(e,t){let s=l(e),i=Math.max(t-1,-1),r=Math.max(s,i);M(e,t,r)},z=function(e,t){Array.isArray(e._stepPristine)&&e._stepPristine[t]&&p(e)[t].querySelectorAll("input, select, textarea").forEach(i=>{var r;(r=i.enhancer)!=null&&r.setPristine&&i.enhancer.setPristine(!0)})},h=function(e){var t;(t=e.enhancer)!=null&&t.errorNavigation&&(e.enhancer.errorNavigation.removeAttribute("hidden"),e.enhancer.errorNavigation.classList.add("Form__error-navigation--visible"),e.enhancer.errorNavigation.focus())},m=function(e){var t;(t=e.enhancer)!=null&&t.errorNavigation&&(e.enhancer.errorNavigation.setAttribute("hidden","hidden"),e.enhancer.errorNavigation.classList.remove("Form__error-navigation--visible"))},v=function(e){if(typeof e._activeStep=="number")return e._activeStep;let t=p(e);for(let s=0;s<t.length;s++){let i=t[s];if(!(i.hasAttribute("hidden")||i.style.display==="none"))return s}return 0},p=function(e){return e.querySelectorAll("."+n)},M=function(e,t,s){let i=typeof s=="number"?s:-1;e.querySelectorAll("nav.Progress").forEach(u=>{u.querySelectorAll(".Progress__button[data-powermail-morestep-current]").forEach(b=>{let P=parseInt(b.dataset.powermailMorestepCurrent,10);if(Number.isNaN(P))return;let R=B(P,t,i);U(b,R)})})},B=function(e,t,s){return e===t?{type:"active",ariaAttributes:{"aria-current":"step"},progressStepClass:"ProgressStep--active",progressItemClass:"Progress__item--sibling-active"}:e<=s?{type:"complete",ariaAttributes:{},progressStepClass:"ProgressStep--complete",progressItemClass:"Progress__item--sibling-complete",useSuccessLabel:!0}:{type:"incomplete",ariaAttributes:{},progressStepClass:"ProgressStep--incomplete",progressItemClass:"Progress__item--sibling-incomplete"}},U=function(e,t){T(e),Object.entries(t.ariaAttributes).forEach(([s,i])=>{e.setAttribute(s,i)}),k(e,t.useSuccessLabel),D(e,t.progressStepClass),O(e,t.progressItemClass)},O=function(e,t){let s=e.closest(".Progress__item");if(!s)return;["Progress__item--sibling-complete","Progress__item--sibling-active","Progress__item--sibling-incomplete"].forEach(r=>s.classList.remove(r)),s.classList.add(t)},T=function(e){["disabled","aria-disabled","aria-current"].forEach(s=>{e.removeAttribute(s)}),e.classList.remove("is-active","is-disabled","is-valid")},k=function(e,t){let s=e.dataset.powermailDefaultLabel||e.textContent.trim(),i=e.dataset.powermailMorestepSuccess||"";e.textContent=t&&i?`${s} ${i}`:s},D=function(e,t){let s=e.closest(".ProgressStep");if(!s)return;["ProgressStep--active","ProgressStep--complete","ProgressStep--incomplete","ProgressStep--next"].forEach(r=>s.classList.remove(r)),s.classList.add(t)}}document.addEventListener("DOMContentLoaded",function(){document.readyState==="loading"?document.addEventListener("DOMContentLoaded",c):c();function c(){setTimeout(function(){new y().initialize()},10)}});})();
