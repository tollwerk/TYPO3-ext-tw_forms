(()=>{var d=class{static getLargestFileSize(n){let a=0;for(let l=0;l<n.files.length;l++){let o=n.files[l];o.size>a&&(a=o.size)}return a}static isFileExtensionInList(n,a){return a.indexOf("."+n)!==-1}static getExtensionFromFileName(n){return n.split(".").pop().toLowerCase()}static getUriWithoutGetParam(n){return n.split("?")[0]}static getRandomString(n){let a="",l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let o=0;o<n;o++)a+=l.charAt(Math.floor(Math.random()*l.length));return a}static redirectToUri(n){n.indexOf("http")!==-1?window.location=n:window.location.pathname=n}static hideElement(n){n!==null&&(n.style.display="none")}static showElement(n){n!==null&&(n.style.display="block")}static isElementVisible(n){return n.offsetParent!==null}};function y(){"use strict";let c="powermail_morestep",n="powermail_fieldset",a=e=>{if(typeof e._validUntil=="number")return e._validUntil;let t=parseInt(e.dataset.morestepValidUntil||"-1",10);return Number.isNaN(t)?-1:t},l=(e,t)=>{e._validUntil=t,e.dataset.morestepValidUntil=String(t)},o=this;this.initialize=function(){A(),F(),_()},this.showFieldset=function(e,t){t.classList.contains(c)&&(V(t),q(t,e),t._activeStep=e,I(t,e),m(t),z(t,e))};let A=function(){document.querySelectorAll("form."+c).forEach(e=>{let t=e.querySelectorAll("."+n);e._stepPristine=Array(t.length).fill(!0)})},_=function(){let e=document.querySelectorAll("form."+c);for(let t=0;t<e.length;t++)w(e[t])},w=function(e){l(e,-1),o.showFieldset(0,e)},f=function(e,{showErrors:t=!0}={}){if(typeof window.isFieldVisible!="function")return!0;let i=Array.from(e.elements).filter(r=>window.isFieldVisible(r)&&r.enhancer),s=!0;return i.forEach(r=>{let u=!r.enhancer.pristine||t,S=r.enhancer.validate(!0,{force:u});Object.keys(S).length>0&&(s=!1)}),s},F=function(){E(),N()},E=function(){let e=document.querySelectorAll("[data-powermail-morestep-show]");for(let t=0;t<e.length;t++)e[t].addEventListener("click",function(i){i.preventDefault(),L(i.currentTarget)})},N=function(){let e=document.querySelectorAll("nav.Progress");for(let t=0;t<e.length;t++){let i=e[t].querySelectorAll(".Progress__button");for(let s=0;s<i.length;s++)i[s].addEventListener("click",function(r){r.preventDefault(),C(r.currentTarget,i)})}},L=function(e){let t=e.closest("form");if(!t)return!1;let i=v(t),s=parseInt(e.getAttribute("data-powermail-morestep-show"),10);if(s<i)return o.showFieldset(s,t),!1;s>i&&x(t,i,s)&&o.showFieldset(s,t)},C=function(e,t){let i=e.closest("form"),s=Array.from(t).indexOf(e),r=a(i),u=v(i);if(s>r+1)return!1;if(s>u&&s>r)if(g(i,u),f(i))l(i,u);else return h(i),!1;o.showFieldset(s,i)},x=function(e,t,i){if(g(e,t),!f(e,{showErrors:!0}))return h(e),!1;let r=Math.max(i-1,a(e));return l(e,r),m(e),!0},g=function(e,t){Array.isArray(e._stepPristine)&&(e._stepPristine[t]=!1,p(e)[t].querySelectorAll("input, select, textarea").forEach(s=>{var r;(r=s.enhancer)!=null&&r.setPristine&&s.enhancer.setPristine(!1)}))},V=function(e){let t=p(e);for(let i=0;i<t.length;i++)d.hideElement(t[i])},q=function(e,t){let i=p(e);d.showElement(i[t])},I=function(e,t){let i=a(e),s=Math.max(t-1,-1),r=Math.max(i,s);M(e,t,r)},z=function(e,t){Array.isArray(e._stepPristine)&&e._stepPristine[t]&&p(e)[t].querySelectorAll("input, select, textarea").forEach(s=>{var r;(r=s.enhancer)!=null&&r.setPristine&&s.enhancer.setPristine(!0)})},h=function(e){var t;(t=e.enhancer)!=null&&t.errorNavigation&&(e.enhancer.errorNavigation.removeAttribute("hidden"),e.enhancer.errorNavigation.classList.add("Form__error-navigation--visible"),e.enhancer.errorNavigation.focus())},m=function(e){var t;(t=e.enhancer)!=null&&t.errorNavigation&&(e.enhancer.errorNavigation.setAttribute("hidden","hidden"),e.enhancer.errorNavigation.classList.remove("Form__error-navigation--visible"))},v=function(e){if(typeof e._activeStep=="number")return e._activeStep;let t=p(e);for(let i=0;i<t.length;i++){let s=t[i];if(!(s.hasAttribute("hidden")||s.style.display==="none"))return i}return 0},p=function(e){return e.querySelectorAll("."+n)},M=function(e,t,i){let s=typeof i=="number"?i:-1;e.querySelectorAll("nav.Progress").forEach(u=>{u.querySelectorAll(".Progress__button[data-powermail-morestep-current]").forEach(b=>{let P=parseInt(b.dataset.powermailMorestepCurrent,10);if(Number.isNaN(P))return;let R=B(P,t,s);U(b,R)})})},B=function(e,t,i){return e===t?{type:"active",ariaAttributes:{"aria-current":"page"},progressStepClass:"ProgressStep--active",progressItemClass:"Progress__item--sibling-active"}:e<=i?{type:"complete",ariaAttributes:{},progressStepClass:"ProgressStep--complete",progressItemClass:"Progress__item--sibling-complete",useSuccessLabel:!0}:{type:"incomplete",ariaAttributes:{},progressStepClass:"ProgressStep--incomplete",progressItemClass:"Progress__item--sibling-incomplete"}},U=function(e,t){T(e),Object.entries(t.ariaAttributes).forEach(([i,s])=>{e.setAttribute(i,s)}),k(e,t.useSuccessLabel),D(e,t.progressStepClass),O(e,t.progressItemClass)},O=function(e,t){let i=e.closest(".Progress__item");if(!i)return;["Progress__item--sibling-complete","Progress__item--sibling-active","Progress__item--sibling-incomplete"].forEach(r=>i.classList.remove(r)),i.classList.add(t)},T=function(e){["disabled","aria-disabled","aria-current"].forEach(i=>{e.removeAttribute(i)}),e.classList.remove("is-active","is-disabled","is-valid")},k=function(e,t){let i=e.dataset.powermailDefaultLabel||e.textContent.trim(),s=e.dataset.powermailMorestepSuccess||"";e.textContent=t&&s?`${i} ${s}`:i},D=function(e,t){let i=e.closest(".ProgressStep");if(!i)return;["ProgressStep--active","ProgressStep--complete","ProgressStep--incomplete","ProgressStep--next"].forEach(r=>i.classList.remove(r)),i.classList.add(t)}}document.addEventListener("DOMContentLoaded",function(){document.readyState==="loading"?document.addEventListener("DOMContentLoaded",c):c();function c(){setTimeout(function(){new y().initialize()},10)}});})();
