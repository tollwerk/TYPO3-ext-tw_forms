(()=>{var b=class{static getLargestFileSize(s){let c=0;for(let d=0;d<s.files.length;d++){let u=s.files[d];u.size>c&&(c=u.size)}return c}static isFileExtensionInList(s,c){return c.indexOf("."+s)!==-1}static getExtensionFromFileName(s){return s.split(".").pop().toLowerCase()}static getUriWithoutGetParam(s){return s.split("?")[0]}static getRandomString(s){let c="",d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let u=0;u<s;u++)c+=d.charAt(Math.floor(Math.random()*d.length));return c}static redirectToUri(s){s.indexOf("http")!==-1?window.location=s:window.location.pathname=s}static hideElement(s){s!==null&&(s.style.display="none")}static showElement(s){s!==null&&(s.style.display="block")}static isElementVisible(s){return s.offsetParent!==null}};function x(){"use strict";let f="powermail_morestep",s="powermail_fieldset",c="is-active",d="is-valid",u="is-disabled",h=new WeakMap,y=this;this.initialize=function(){document.querySelectorAll("form."+f).forEach(a=>{let i=a.querySelectorAll("."+s);a._stepPristine=Array(i.length).fill(!0)}),E(),F()},this.showFieldset=function(a,i){if(i.classList.contains(f)){N(i);let l=g(i);b.showElement(l[a]),w(i,a,h.get(i)||-1),i.enhancer&&i.enhancer.errorNavigation&&(i.enhancer.errorNavigation.setAttribute("hidden","hidden"),i.enhancer.errorNavigation.classList.remove("Form__error-navigation--visible"));let r=a;Array.isArray(i._stepPristine)&&i._stepPristine[r]&&g(i)[r].querySelectorAll("input, select, textarea").forEach(t=>{t.enhancer&&typeof t.enhancer.setPristine=="function"&&t.enhancer.setPristine(!0)})}};let F=function(){let a=document.querySelectorAll("form."+f);for(let i=0;i<a.length;i++)_(a[i])},_=function(a){h.set(a,-1),y.showFieldset(0,a)},S=function(a,{showErrors:i=!0}={}){if(typeof window.isFieldVisible!="function")return!0;let l=Array.from(a.elements).filter(e=>window.isFieldVisible(e)&&e.enhancer),r=!0;return l.forEach(e=>{let t=!e.enhancer.pristine||i,o=e.enhancer.validate(!0,{force:t});Object.keys(o).length>0&&(r=!1)}),r},E=function(){let a=document.querySelectorAll("[data-powermail-morestep-show]");for(let l=0;l<a.length;l++)a[l].addEventListener("click",function(r){r.preventDefault();let e=r.currentTarget,t=e.closest("form");if(!t)return!1;let o=P(t),n=parseInt(e.getAttribute("data-powermail-morestep-show"));if(console.log(n),n<o){y.showFieldset(n,t);let p=h.get(t)||-1;return w(t,n,p),!1}if(n>o){if(!(Array.isArray(t._stepPristine)&&(t._stepPristine[o]=!1,g(t)[o].querySelectorAll("input, select, textarea").forEach(m=>{var L;(L=m.enhancer)!=null&&L.setPristine&&m.enhancer.setPristine(!1)})),S(t,{showErrors:!0})))return Array.isArray(t._stepPristine)&&(t._stepPristine[o]=!1,g(t)[o].querySelectorAll("input, select, textarea").forEach(m=>{m.enhancer&&typeof m.enhancer.setPristine=="function"&&m.enhancer.setPristine(!1)})),t.enhancer&&t.enhancer.errorNavigation&&(t.enhancer.errorNavigation.removeAttribute("hidden"),t.enhancer.errorNavigation.classList.add("Form__error-navigation--visible"),t.enhancer.errorNavigation.focus()),!1;let v=Math.max(o,h.get(t)||-1);h.set(t,v),y.showFieldset(n,t),w(t,n,v),t.enhancer&&t.enhancer.errorNavigation&&(t.enhancer.errorNavigation.setAttribute("hidden","hidden"),t.enhancer.errorNavigation.classList.remove("Form__error-navigation--visible"))}});let i=document.querySelectorAll("nav.Progress");for(let l=0;l<i.length;l++){let r=i[l].querySelectorAll(".Progress__button");for(let e=0;e<r.length;e++)r[e].addEventListener("click",function(t){t.preventDefault();let o=t.currentTarget,n=o.closest("form"),p=Array.from(r).indexOf(o),v=h.get(n)||-1,A=P(n);if(p>v)return!1;if(p>A&&p>v)if(Array.isArray(n._stepPristine)&&(n._stepPristine[A]=!1),S(n))h.set(n,A);else return n.enhancer&&n.enhancer.errorNavigation&&(n.enhancer.errorNavigation.removeAttribute("hidden"),n.enhancer.errorNavigation.classList.add("Form__error-navigation--visible"),n.enhancer.errorNavigation.focus()),!1;y.showFieldset(p,n)})}},N=function(a){let i=g(a);for(let l=0;l<i.length;l++)b.hideElement(i[l])},P=function(a){let i=g(a);for(let l=0;l<i.length;l++)if(i[l].style.display!=="none")return l;return 0},g=function(a){return a.querySelectorAll("."+s)},w=function(a,i,l){let r=a.querySelectorAll(".Progress__button, [data-powermail-morestep-current]");l=typeof l=="number"?l:-1;for(let e=0;e<r.length;e++){r[e].classList.remove(c,d,u,"is-next"),r[e].removeAttribute("disabled"),r[e].removeAttribute("aria-disabled"),r[e].removeAttribute("aria-current");let t=r[e].dataset.powermailDefaultLabel||r[e].textContent.trim(),o=r[e].dataset.powermailMorestepSuccess||"",n=r[e].closest(".ProgressStep");n.classList.remove("ProgressStep--complete","ProgressStep--incomplete","ProgressStep--next"),e===i?(r[e].classList.add(c),r[e].textContent=t,r[e].setAttribute("aria-current","step"),n.classList.add("ProgressStep--incomplete")):e<=l?(r[e].classList.add(d),r[e].textContent=o?`${t} ${o}`:t,n.classList.add("ProgressStep--complete")):e===i+1?(r[e].classList.add("is-next"),r[e].setAttribute("disabled","disabled"),r[e].setAttribute("aria-disabled","true"),r[e].textContent=t,n.classList.add("ProgressStep--next")):(r[e].classList.add(u),r[e].setAttribute("disabled","disabled"),r[e].setAttribute("aria-disabled","true"),r[e].textContent=t,n.classList.add("ProgressStep--incomplete"))}}}document.addEventListener("DOMContentLoaded",function(){document.readyState==="loading"?document.addEventListener("DOMContentLoaded",f):f();function f(){setTimeout(function(){new x().initialize()},10)}});})();
